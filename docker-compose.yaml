version: "3.7"

services:
  database:
      image: mongo:latest
      container_name: mongo-db
      restart: always
      volumes:
        - mongo-data:/data/db
        - ./mongo-init.js:/docker-entrypoint-initdb.d/mongo-init.js:ro
      env_file:
        - .env
      secrets:
        - db_password
      environment:
        MONGO_INITDB_ROOT_PASSWORD_FILE: /run/secrets/db_password
        MONGO_INITDB_ROOT_USERNAME: ${MONGO_ROOT_USERNAME}
        MONGO_INITDB_DATABASE: "configurations"
      ports:
        - ${MONGO_PORT}:27017
        
volumes:
  mongo-data:
    driver: local
          
secrets:
  db_password:
    file: secrets/MongoDB/password.txt
  